# æœŸæœ«å®éªŒæŠ¥å‘Šï¼šåŸºäº NeRF çš„ç‰©ä½“é‡å»ºä¸æ–°è§†å›¾åˆæˆï¼ˆTensoRFï¼‰

## ä¸€ã€å®éªŒä»»åŠ¡ç®€ä»‹

æœ¬å®éªŒä»»åŠ¡æ—¨åœ¨ä½¿ç”¨åŸºäº NeRF çš„æ–¹æ³•ï¼Œå¯¹è‡ªé‡‡å›¾åƒè¿›è¡Œä¸‰ç»´é‡å»ºå¹¶ç”Ÿæˆæ–°è§†è§’å›¾åƒã€‚  
ä¸ºæå‡è®­ç»ƒé€Ÿåº¦å’Œè¡¨ç°æ•ˆæœï¼Œæœ¬å®éªŒé‡‡ç”¨ TensoRF åŠ é€Ÿæ–¹æ³•è¿›è¡Œè®­ç»ƒå’Œæ¸²æŸ“ã€‚

---

## äºŒã€æ•°æ®å‡†å¤‡ä¸ç›¸æœºå‚æ•°ä¼°è®¡

- æ‹æ‘„å›¾åƒæ€»æ•°ï¼š71 å¼   
- åˆ†è¾¨ç‡ï¼š4096 Ã— 3072  
- ç›¸æœºå‚æ•°ä¼°è®¡å·¥å…·ï¼šCOLMAPï¼ˆå‘½ä»¤è¡Œç‰ˆï¼‰  
- ä½¿ç”¨ç›¸æœºæ¨¡å‹ï¼šSIMPLE_RADIAL

### COLMAP å¤„ç†æµç¨‹ï¼š

1. å›¾åƒç‰¹å¾æå–ï¼ˆ`feature_extractor`ï¼‰  
2. ç‰¹å¾åŒ¹é…ï¼ˆ`exhaustive_matcher`ï¼‰  
3. ç¨€ç–é‡å»ºï¼ˆ`mapper`ï¼‰  
4. æ¨¡å‹è½¬æ¢ï¼ˆ`model_converter` â†’ `.txt`ï¼‰  
5. åæ ‡è½¬æ¢ä¸º NeRF æ ¼å¼ï¼ˆ`colmap2nerf.py` â†’ `transforms_train.json`ï¼‰


## ä¸‰ã€æ¨¡å‹ä¸è®­ç»ƒé…ç½®

- æ‰€ç”¨æ¨¡å‹ï¼š`TensoRF` â†’ `TensorVMSplit`
- æ•°æ®åŠ è½½å™¨ï¼š`own_data`
- é…ç½®æ–‡ä»¶è·¯å¾„ï¼š`configs/your_own_data.txt`

### å…³é”®è®­ç»ƒå‚æ•°ï¼š

| å‚æ•°åç§°      | å€¼              |
| ------------- | --------------- |
| batch_size    | 2048            |
| n_iters       | 30000           |
| N_voxel_final | 300 Ã— 300 Ã— 300 |
| lr_init       | 0.02            |
| Optimizer       | Adam            |
### ç¯å¢ƒé…ç½®ï¼š

- æ˜¾å¡å‹å·ï¼šA100
- CUDA ç‰ˆæœ¬ï¼š12.1
- PyTorch ç‰ˆæœ¬ï¼š2.5.1

## å››ã€ç»“æœå±•ç¤ºä¸è¯„ä¼°åˆ†æ

### æ¸²æŸ“å›¾åƒç¤ºä¾‹ï¼ˆæµ‹è¯•è§†è§’ï¼‰

![æ¸²æŸ“ç¤ºä¾‹](https://github.com/irislovebest/TensoRF_qm/blob/main/000.png)

---

## äº”ã€æ–¹æ³•æ€»ç»“ä¸åˆ†æ

- TensoRF ç›¸æ¯”åŸå§‹ NeRFï¼Œè®­ç»ƒæ•ˆç‡å¤§å¹…æå‡ï¼ˆçº¦ x4~x10ï¼‰
- æ¸²æŸ“è´¨é‡æ¥è¿‘æˆ–ç•¥ä¼˜ï¼Œå°¤å…¶åœ¨å°‘é‡å›¾åƒåœºæ™¯ä¸‹æ›´ç¨³å®š
- å®éªŒä¸­é‡åˆ°çš„é—®é¢˜ï¼š
  - transforms æ–‡ä»¶æ ¼å¼ä¸åŒ¹é…
  - COLMAP æ¨¡å‹æœªè¾“å‡ºå¯¼è‡´è®­ç»ƒå¤±è´¥
  - å›¾åƒåç¼€åä¸ä¸€è‡´å¯¼è‡´è¯»å–å¤±è´¥
- ä¼˜åŒ–å»ºè®®ï¼š
  - æ·»åŠ æµ‹è¯•å›¾åƒç‹¬ç«‹é‡‡é›†
  - æå‰ç»Ÿä¸€å›¾åƒå‘½åä¸æ ¼å¼
  - åç»­å¯æ¥å…¥ 3D Gaussian æ–¹æ¡ˆä½œå¯¹æ¯”

---



## è®­ç»ƒæŒ‡æ ‡æ›²çº¿åˆ†æï¼ˆTensoRFï¼‰

ä¸ºè¯„ä¼°æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­çš„å­¦ä¹ æ•ˆæœï¼Œæˆ‘ä»¬è®°å½•å¹¶å¯è§†åŒ–äº†å¦‚ä¸‹å››ç±»å…³é”®æŒ‡æ ‡æ›²çº¿ï¼Œåˆ†åˆ«ä¸º PSNRã€MSEã€reg_tv_appã€reg_tv_densityã€‚

### 1. PSNR æ›²çº¿ï¼ˆPeak Signal-to-Noise Ratioï¼‰

- è¡¡é‡æ¨¡å‹æ¸²æŸ“å›¾åƒä¸çœŸå®å›¾åƒçš„ç›¸ä¼¼åº¦ï¼Œå€¼è¶Šé«˜ä»£è¡¨è´¨é‡è¶Šå¥½ã€‚
- PSNR ä»åˆå§‹çš„ 5 å¿«é€Ÿæå‡è‡³ 27ï¼Œæ•´ä½“è¶‹åŠ¿æŒç»­ä¸Šå‡ï¼Œè¡¨æ˜æ¨¡å‹è®­ç»ƒæ”¶æ•›è‰¯å¥½ï¼Œæ¸²æŸ“è´¨é‡ç¨³å®šæå‡ã€‚

![PSNR æ›²çº¿](psnr_curve_centered.png)

---

### 2. MSE æ›²çº¿ï¼ˆMean Squared Errorï¼‰

- è¡¡é‡åƒç´ é¢„æµ‹è¯¯å·®çš„å‡æ–¹å€¼ï¼Œè¶Šä½è¶Šå¥½ã€‚
- æ›²çº¿å‘ˆç°å‡ºæŒ‡æ•°è¡°å‡è¶‹åŠ¿ï¼Œä»çº¦ 0.3 é™è‡³ 0.0005 ä»¥ä¸‹ï¼Œè¯´æ˜ç½‘ç»œæŸå¤±å¿«é€Ÿä¸‹é™ä¸”ç¨³å®šã€‚

![MSE æ›²çº¿](train_mse.png)

---

### 3. Appearance TV æ­£åˆ™é¡¹ï¼ˆtrain/reg_tv_appï¼‰

- æ§åˆ¶å¤–è§‚ç¼–ç ï¼ˆappearance embeddingï¼‰çš„å¹³æ»‘æ€§ï¼Œé˜²æ­¢å›¾åƒå‡ºç°çº¹ç†å™ªå£°ã€‚
- æ›²çº¿å‰æœŸéœ‡è¡ï¼ŒåæœŸå¹³ç¨³ï¼Œè¯´æ˜æ­£åˆ™é¡¹æœ‰æ•ˆæŠ‘åˆ¶å™ªç‚¹ã€è¾…åŠ©ç½‘ç»œæ”¶æ•›ã€‚

![reg_tv_app æ›²çº¿](train_reg_tv_app.png)

---

### 4. Density TV æ­£åˆ™é¡¹ï¼ˆtrain/reg_tv_densityï¼‰

- æ§åˆ¶ä½“ç´ å¯†åº¦åœ¨ç©ºé—´ä¸­çš„è¿ç»­æ€§ï¼Œé¿å…ç»“æ„è·³å˜ã€‚
- æ›²çº¿è¶‹åŠ¿ä¸ reg_tv_app ç±»ä¼¼ï¼Œæœ€ç»ˆå¹³ç¨³ï¼Œè¡¨æ˜å‡ ä½•åœºç»“æ„é€æ­¥åˆç†ã€‚

![reg_tv_density æ›²çº¿](train_reg_tv_density.png)

---

### ğŸ“‹ æŒ‡æ ‡ä¸è¶‹åŠ¿è¡¨æ ¼

| æŒ‡æ ‡å             | ç‰©ç†æ„ä¹‰                  | è¶‹åŠ¿åˆ†æ                  | è®­ç»ƒä½œç”¨             |
| ------------------ | ------------------------- | ------------------------- | -------------------- |
| **train/psnr**     | å›¾åƒå³°å€¼ä¿¡å™ªæ¯”ï¼ˆâ†‘ï¼‰       | å¹³ç¨³ä¸Šå‡ï¼Œæœ€ç»ˆ > 27       | åæ˜ æ¨¡å‹é‡å»ºç²¾åº¦æå‡ |
| **train/mse**      | åƒç´ å‡æ–¹è¯¯å·®ï¼ˆâ†“ï¼‰         | å¿«é€Ÿä¸‹é™è‡³ 0.000x         | æŸå¤±ç¨³å®šæ”¶æ•›         |
| **reg_tv_app**     | å¤–è§‚ç¼–ç å¹³æ»‘æ€§æ­£åˆ™é¡¹ï¼ˆâ†˜ï¼‰ | åˆéœ‡è¡ â†’ åå¹³ç¨³           | é™ä½çº¹ç†è¿‡æ‹Ÿåˆæˆ–å™ªå£° |
| **reg_tv_density** | å¯†åº¦åœºè¿ç»­æ€§çº¦æŸï¼ˆâ†˜ï¼‰     | ç±»ä¼¼ reg_tv_appï¼Œç¨³å®šæ”¶æ•› | è¾…åŠ©æ¨¡å‹å‡ ä½•è¾¹ç•Œè¿è´¯ |

> ## å…­ã€é™„å½•

- æ¨¡å‹æƒé‡ / æ¸²æŸ“ç»“æœï¼ˆç™¾åº¦äº‘ï¼‰ï¼š[é“¾æ¥](https://pan.baidu.com)
- é…ç½®æ–‡ä»¶(your_own_data.txt)èŠ‚é€‰ï¼š

```ini
# your_own_data.txt
dataset_name = own_data
datadir = ../own_data
n_iters = 30000
batch_size = 2048
model_name = TensorVMSplit
N_voxel_final = 27000000
lr_init = 0.02
...
```
